# Demo Generation Scripts

This directory contains scripts used to automate and record the demonstration scenarios (Part 1 and Part 2) for the
Cilium Multi-Cluster project.

## Contents

* **`demo_part1_init.sh`**: Bash script simulating the first part of the demo (Cilium Installation and FluxCD
  Bootstrap).
* **`demo_part2_mesh.sh`**: Bash script simulating the second part (Cluster Mesh verification, MCS API, Network
  Policies, Hubble).
* **`add_markers.py`**: Python script to post-process `.cast` files generated by `asciinema` to inject chapter
  markers.

## Prerequisites

The following tools must be installed and configured for the scripts to work:

* `kubectl` (with `paris` and `newyork` contexts configured)
* `helm`
* `cilium` CLI
* `flux` CLI
* `jq`
* `hubble` CLI
* `asciinema` (for recording)
* Python 3 (for the marker script)

## Usage

### 1. Recording the Demo

Use `asciinema` to record the execution of the bash scripts.

Example for Part 1:

```bash
asciinema rec -c ./demo_part1_init.sh demo_part1_raw.cast
```

Example for Part 2:

```bash
asciinema rec -c ./demo_part2_mesh.sh demo_part2_raw.cast
```

### 2. Adding Markers

The bash scripts emit special strings `::MARKER::Chapter Title::` which are captured in the standard output. The
`add_markers.py` python script parses the raw `.cast` file, extracts these strings, and converts them into marker
events supported by the asciinema player, while cleaning up the visible output.

Usage:

```bash
python3 add_markers.py demo_part1_raw.cast demo_part1_final.cast
python3 add_markers.py demo_part2_raw.cast demo_part2_final.cast
```

The resulting `_final.cast` file can then be played or uploaded.

### Note on Demo Scripts

These scripts use a `pe` (print and execute) function that simulates keyboard typing for a more natural effect during
the demonstration. You can adjust the `TYPE_SPEED` variable at the beginning of each script to change the typing speed.
